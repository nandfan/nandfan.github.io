<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: timerstart Pages: 1 -->
<svg width="765pt" height="457pt"
 viewBox="0.00 0.00 765.00 457.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 453)">
<title>timerstart</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-453 761,-453 761,4 -4,4"/>
<text text-anchor="middle" x="378.5" y="-53.8" font-family="Times,serif" font-size="14.00">假设初始化时间轮参数为， 轮数：2， slot：512， 时间间隔：1s。 现在要添加一个timer，这个timer在1027s后过期。</text>
<text text-anchor="middle" x="378.5" y="-22.8" font-family="Times,serif" font-size="14.00">注意: 由于timer的时间间隔wheel0的最大容量, 所以将其存放至wheel1中, timer在wheel0中的偏移位置保存在timer结构中的</text>
<text text-anchor="start" x="8" y="-7.8" font-family="Times,serif" font-size="14.00">fast_ring_offset成员中, 当处理到wheel1中的slot时, 再根据其fast_ring_offset, 将其放置到wheel0中的相应偏移位置. </text>
<g id="clust1" class="cluster">
<title>cluster_tw_timer</title>
<polygon fill="none" stroke="black" stroke-dasharray="1,5" points="40.74,-128 40.74,-329 130.74,-329 130.74,-128 40.74,-128"/>
<text text-anchor="middle" x="85.74" y="-313.8" font-family="Times,serif" font-size="14.00">timers 向量</text>
</g>
<!-- timers -->
<g id="node1" class="node">
<title>timers</title>
<polygon fill="none" stroke="black" points="49.24,-136.5 49.24,-297.5 122.24,-297.5 122.24,-136.5 49.24,-136.5"/>
<text text-anchor="middle" x="85.74" y="-282.3" font-family="Times,serif" font-size="14.00">timer0</text>
<polyline fill="none" stroke="black" points="49.24,-274.5 122.24,-274.5 "/>
<text text-anchor="middle" x="85.74" y="-259.3" font-family="Times,serif" font-size="14.00">timer1</text>
<polyline fill="none" stroke="black" points="49.24,-251.5 122.24,-251.5 "/>
<text text-anchor="middle" x="85.74" y="-236.3" font-family="Times,serif" font-size="14.00">timer2</text>
<polyline fill="none" stroke="black" points="49.24,-228.5 122.24,-228.5 "/>
<text text-anchor="middle" x="85.74" y="-213.3" font-family="Times,serif" font-size="14.00">......</text>
<polyline fill="none" stroke="black" points="49.24,-205.5 122.24,-205.5 "/>
<text text-anchor="middle" x="85.74" y="-190.3" font-family="Times,serif" font-size="14.00">timer1023</text>
<polyline fill="none" stroke="black" points="49.24,-182.5 122.24,-182.5 "/>
<text text-anchor="middle" x="85.74" y="-167.3" font-family="Times,serif" font-size="14.00">......</text>
<polyline fill="none" stroke="black" points="49.24,-159.5 122.24,-159.5 "/>
<text text-anchor="middle" x="85.74" y="-144.3" font-family="Times,serif" font-size="14.00">timerN</text>
</g>
<!-- nt -->
<g id="node2" class="node">
<title>nt</title>
<polygon fill="none" stroke="black" points="303.74,-356.5 303.74,-448.5 501.74,-448.5 501.74,-356.5 303.74,-356.5"/>
<text text-anchor="middle" x="402.74" y="-433.3" font-family="Times,serif" font-size="14.00">new&#45;timer</text>
<polyline fill="none" stroke="black" points="303.74,-425.5 501.74,-425.5 "/>
<text text-anchor="middle" x="402.74" y="-410.3" font-family="Times,serif" font-size="14.00">1027s后过期</text>
<polyline fill="none" stroke="black" points="303.74,-402.5 501.74,-402.5 "/>
<text text-anchor="start" x="311.74" y="-387.3" font-family="Times,serif" font-size="14.00">在wheel0的位置: 1027%512=3 </text>
<polyline fill="none" stroke="black" points="303.74,-379.5 501.74,-379.5 "/>
<text text-anchor="start" x="311.74" y="-364.3" font-family="Times,serif" font-size="14.00">在wheel1的位置: 1027/512=2 </text>
</g>
<!-- nt&#45;&gt;timers -->
<g id="edge1" class="edge">
<title>nt:w&#45;&gt;timers:e</title>
<path fill="none" stroke="black" d="M302.74,-402.5C220.02,-402.5 178.76,-397.06 131.74,-329 126.83,-321.9 131.86,-193.91 127.05,-157.56"/>
<polygon fill="black" stroke="black" points="130.32,-156.31 123.74,-148 123.7,-158.59 130.32,-156.31"/>
<text text-anchor="middle" x="167.24" y="-151.8" font-family="Times,serif" font-size="14.00">分配新的timer</text>
</g>
<!-- tws -->
<!-- timer_wheel_slot -->
<g id="node3" class="node">
<title>tws</title>
<polyline fill="none" stroke="black" points="201.74,-217 201.74,-238 "/>
<text text-anchor="start" x="151.74" y="-223.8" font-family="Times,serif" font-size="14.00">wheel 0:</text>
<polygon fill="none" stroke="black" points="201.74,-217 201.74,-238 234.74,-238 234.74,-217 201.74,-217"/>
<text text-anchor="start" x="204.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot0</text>
<polygon fill="none" stroke="black" points="234.74,-217 234.74,-238 267.74,-238 267.74,-217 234.74,-217"/>
<text text-anchor="start" x="237.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot1</text>
<polygon fill="none" stroke="black" points="267.74,-217 267.74,-238 300.74,-238 300.74,-217 267.74,-217"/>
<text text-anchor="start" x="270.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot2</text>
<polygon fill="none" stroke="black" points="300.74,-217 300.74,-238 344.74,-238 344.74,-217 300.74,-217"/>
<text text-anchor="start" x="303.74" y="-223.8" font-family="Times,serif" font-size="14.00"> &#160;...... &#160;</text>
<polygon fill="crimson" stroke="transparent" points="344.74,-217 344.74,-238 432.74,-238 432.74,-217 344.74,-217"/>
<polygon fill="none" stroke="black" points="344.74,-217 344.74,-238 432.74,-238 432.74,-217 344.74,-217"/>
<text text-anchor="start" x="347.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot100 current</text>
<polygon fill="none" stroke="black" points="432.74,-217 432.74,-238 478.74,-238 478.74,-217 432.74,-217"/>
<text text-anchor="start" x="435.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot101</text>
<polygon fill="none" stroke="black" points="478.74,-217 478.74,-238 524.74,-238 524.74,-217 478.74,-217"/>
<text text-anchor="start" x="481.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot102</text>
<polygon fill="cornflowerblue" stroke="transparent" points="524.74,-217 524.74,-238 570.74,-238 570.74,-217 524.74,-217"/>
<polygon fill="none" stroke="black" points="524.74,-217 524.74,-238 570.74,-238 570.74,-217 524.74,-217"/>
<text text-anchor="start" x="527.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot103</text>
<polygon fill="none" stroke="black" points="570.74,-217 570.74,-238 616.74,-238 616.74,-217 570.74,-217"/>
<text text-anchor="start" x="573.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot104</text>
<polygon fill="none" stroke="black" points="616.74,-217 616.74,-238 660.74,-238 660.74,-217 616.74,-217"/>
<text text-anchor="start" x="619.74" y="-223.8" font-family="Times,serif" font-size="14.00"> &#160;...... &#160;</text>
<polygon fill="none" stroke="black" points="660.74,-217 660.74,-238 706.74,-238 706.74,-217 660.74,-217"/>
<text text-anchor="start" x="663.74" y="-223.8" font-family="Times,serif" font-size="14.00">slot511</text>
<polyline fill="none" stroke="black" points="201.74,-196 201.74,-217 "/>
<text text-anchor="start" x="151.74" y="-202.8" font-family="Times,serif" font-size="14.00">wheel 1:</text>
<polygon fill="none" stroke="black" points="201.74,-196 201.74,-217 234.74,-217 234.74,-196 201.74,-196"/>
<text text-anchor="start" x="204.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot0</text>
<polygon fill="none" stroke="black" points="234.74,-196 234.74,-217 267.74,-217 267.74,-196 234.74,-196"/>
<text text-anchor="start" x="237.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot1</text>
<polygon fill="none" stroke="black" points="267.74,-196 267.74,-217 300.74,-217 300.74,-196 267.74,-196"/>
<text text-anchor="start" x="270.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot2</text>
<polygon fill="none" stroke="black" points="300.74,-196 300.74,-217 344.74,-217 344.74,-196 300.74,-196"/>
<text text-anchor="start" x="303.74" y="-202.8" font-family="Times,serif" font-size="14.00"> &#160;...... &#160;</text>
<polygon fill="crimson" stroke="transparent" points="344.74,-196 344.74,-217 432.74,-217 432.74,-196 344.74,-196"/>
<polygon fill="none" stroke="black" points="344.74,-196 344.74,-217 432.74,-217 432.74,-196 344.74,-196"/>
<text text-anchor="start" x="347.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot200 current</text>
<polygon fill="none" stroke="black" points="432.74,-196 432.74,-217 478.74,-217 478.74,-196 432.74,-196"/>
<text text-anchor="start" x="435.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot201</text>
<polygon fill="cornflowerblue" stroke="transparent" points="478.74,-196 478.74,-217 524.74,-217 524.74,-196 478.74,-196"/>
<polygon fill="none" stroke="black" points="478.74,-196 478.74,-217 524.74,-217 524.74,-196 478.74,-196"/>
<text text-anchor="start" x="481.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot202</text>
<polygon fill="none" stroke="black" points="524.74,-196 524.74,-217 570.74,-217 570.74,-196 524.74,-196"/>
<text text-anchor="start" x="527.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot203</text>
<polygon fill="none" stroke="black" points="570.74,-196 570.74,-217 616.74,-217 616.74,-196 570.74,-196"/>
<text text-anchor="start" x="573.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot204</text>
<polygon fill="none" stroke="black" points="616.74,-196 616.74,-217 660.74,-217 660.74,-196 616.74,-196"/>
<text text-anchor="start" x="619.74" y="-202.8" font-family="Times,serif" font-size="14.00"> &#160;...... &#160;</text>
<polygon fill="none" stroke="black" points="660.74,-196 660.74,-217 706.74,-217 706.74,-196 660.74,-196"/>
<text text-anchor="start" x="663.74" y="-202.8" font-family="Times,serif" font-size="14.00">slot511</text>
</g>
<!-- nt&#45;&gt;tws -->
<g id="edge4" class="edge">
<title>nt:e&#45;&gt;tws:s0103</title>
<path fill="none" stroke="blue" stroke-dasharray="1,5" d="M502.74,-390.5C569.55,-390.5 549.98,-316.98 547.91,-249.36"/>
<polygon fill="blue" stroke="blue" points="547.74,-239 552.4,-248.93 547.82,-244 547.9,-249 547.9,-249 547.9,-249 547.82,-244 543.4,-249.07 547.74,-239 547.74,-239"/>
</g>
<!-- nt&#45;&gt;tws -->
<g id="edge5" class="edge">
<title>nt:e&#45;&gt;tws:s1202</title>
<path fill="none" stroke="blue" d="M502.74,-367.5C526.9,-367.5 527.22,-349.76 547.74,-337 620.25,-291.9 671.81,-315.81 714.74,-242 725.02,-224.33 729.16,-210.49 714.74,-196 707.47,-188.69 551.24,-184.38 511.08,-191.21"/>
<polygon fill="blue" stroke="blue" points="501.74,-195 509.31,-187.07 506.37,-193.12 511.01,-191.24 511.01,-191.24 511.01,-191.24 506.37,-193.12 512.7,-195.41 501.74,-195 501.74,-195"/>
</g>
<!-- tws&#45;&gt;tws -->
<g id="edge2" class="edge">
<title>tws:sc0&#45;&gt;tws:nw</title>
<path fill="none" stroke="black" stroke-dasharray="1,5" d="M386.13,-238.2C380.73,-266.09 388.46,-302 456.74,-302 524.11,-302 532.54,-271.38 527.56,-247.64"/>
<polygon fill="black" stroke="black" points="530.91,-246.61 524.74,-238 524.19,-248.58 530.91,-246.61"/>
<text text-anchor="middle" x="427.74" y="-305.8" font-family="Times,serif" font-size="14.00">从wheel0的current开始偏移</text>
<polyline fill="none" stroke="black" points="509.24,-302 346.24,-302 456.75,-302 "/>
</g>
<!-- tws&#45;&gt;tws -->
<g id="edge3" class="edge">
<title>tws:sc1&#45;&gt;tws:sw</title>
<path fill="none" stroke="black" d="M386.09,-195.8C380.43,-167.91 385.86,-132 433.74,-132 480.99,-132 486.9,-162.62 481.6,-186.36"/>
<polygon fill="black" stroke="black" points="478.23,-185.42 478.74,-196 484.94,-187.41 478.23,-185.42"/>
<text text-anchor="middle" x="427.74" y="-120.8" font-family="Times,serif" font-size="14.00">从wheel1的current开始偏移</text>
<polyline fill="none" stroke="black" points="509.24,-117 346.24,-117 433.77,-132 "/>
</g>
</g>
</svg>
